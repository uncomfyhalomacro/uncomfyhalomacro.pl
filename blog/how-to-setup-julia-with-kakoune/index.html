<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1,maximum-scale=1" name=viewport><meta content="uncomfy uh... i have a website? How To Setup Julia with Kakoune " name=description><title>How To Setup Julia with Kakoune</title><link href=/favicon.png rel=icon><link href="https://uncomfyhalomacro.pl/style.css?h=b3ea0c6ca2d4276c7a3b" rel=stylesheet><link media="(prefers-color-scheme: dark)" href=/syntax-theme-dark.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=/syntax-theme-light.css rel=stylesheet><link href="https://uncomfyhalomacro.pl/color/auto.css?h=c9e3a532fd9af99660b2" rel=stylesheet><link href=https://uncomfyhalomacro.pl/atom.xml rel=alternate title=RSS type=application/atom+xml><script crossorigin src=https://kit.fontawesome.com/51d55b4c7d.js></script><script>var resize=(()=>{let b=`block`;var a=document.getElementById(`myLinks`);if(a.style.display===b){a.style.display=`none`}else{a.style.display=b}});try{const a=[/news\.ycombinator\.com/i,/reddit\.com/i];if(document.referrer){const b=new URL(document.referrer);if(!/bad-networks/i.test(window.location.href)&&a.some(a=>a.test(b.host))){window.location.href=`https://www.pcloadletter.dev/blog/bad-networks`}}}catch(a){console.log(a)}</script><body><div class=main-grid><div class=topnav><a class=icon href=javascript:void(0); onclick=resize()> <img alt="favicon here" class=icon_img src=/favicon.png> </a><a class=active href=https://uncomfyhalomacro.pl/>home</a><a href=https://uncomfyhalomacro.pl/tags>tags</a><a href=https://uncomfyhalomacro.pl/blog/>blog</a><a href=/microbio-cv.pdf>microbio cv</a><a href=/tech-cv.pdf>tech cv</a><div id=myLinks><a href=https://uncomfyhalomacro.pl/scripts/>scripts</a><a href=https://uncomfyhalomacro.pl/lecture/>lecture</a></div></div><div class=sub-grid><div class=content-grid><div class=info><h1>How To Setup Julia with Kakoune<span> <a href=https://uncomfyhalomacro.pl/atom.xml><i class="fa-sharp fa-solid fa-rss"></i></a> </span></h1><p><span><a href=https://uncomfyhalomacro.pl/tags/editor>#editor</a></span> <span><a href=https://uncomfyhalomacro.pl/tags/kakoune>#kakoune</a></span> <span><a href=https://uncomfyhalomacro.pl/tags/julia>#julia</a></span> <br><br> <span class=author>uncomfyhalomacro </span>| <span class=dates>2024-06-08</span> | <span class=readtime>reading time: ~4min</span></div><div class=toc><h1>Contents</h1><div class=toc-container><ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#what-is-kakoune>What is Kakoune?</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#setup>Setup</a> <ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#installing-kakoune-lsp>Installing Kakoune LSP</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#configuring-the-lsp>Configuring the LSP</a></ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#conclusion>Conclusion</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#versions-of-software-used-at-the-time-of-writing>Versions of software used at the time of writing</a></ul></div></div><div class=content-body><article><section class=content><p>This short post talks about how I setup Julia for Kakoune based of from my <a href=https://github.com/uncomfyhalomacro/kakudite>config</a>. I rarely use Julia nowadays but some people still ask me how to setup Julia for X and Y editor lmao. So I'm just going to write it here to help others out a bit.<h1 id=what-is-kakoune>What is Kakoune?<a aria-label="Anchor link for: what-is-kakoune" class=zola-anchor href=#what-is-kakoune>ยง</a></h1><p><a href=https://github.com/mawww/kakoune>Kakoune</a> is a modal editor that tries to be better than Vim. It reverses the action-verb syntax of Vim e.g. <code>dw</code> for delete word in Vim, <code>wd</code> in Kakoune. And it also removes some inconsistencies of the Vim editor when it comes to other functions of which I won't discuss and which you have to find out yourself.<p>The editor also has multi-cursors which is a controversial topic among terminal editor enthusiasts. But it's a good fit for Kakoune because of its "haptic" feedback or more accurately visual feedback that shows a selection before we can do any action.<p>The editor also has some kind of session/server support where you can edit in the same server socket. This allows multi-window editing without the actual need of a multiplexer (although, most users do actually use a multiplexer to make the experience better). Here is an example script to allow me to connect an existing session with <code>sk</code> or <a href=https://github.com/lotabout/skim>skim</a> (an fzf clone in Rust).<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">!/bin/bash</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-set z-shell">set</span></span><span class="z-meta z-function-call z-arguments z-shell"> -euo pipefail</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-shopt z-shell">shopt</span></span><span class="z-meta z-function-call z-arguments z-shell"> -s lastpipe</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">SESSION</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-parens z-begin z-shell">(</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">kak</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>l</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-meta z-function-call z-arguments z-shell"></span>	<span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sk</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">	--</span>prompt</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>choose an existing kakoune session> <span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">	--</span>header</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>sessions<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>reverse</span></span><span class="z-punctuation z-section z-parens z-end z-shell">)</span></span></span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-storage z-modifier z-shell">export</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">SESSION</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-support z-function z-test z-begin z-shell">[</span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>z</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">SESSION</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-support z-function z-test z-end z-shell">]</span></span> <span class="z-keyword z-operator z-logical z-and z-shell">&&</span> <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-exit z-shell">exit</span></span><span class="z-meta z-function-call z-arguments z-shell"> 1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">kak</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>c</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">SESSION</span></span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-language z-shell">@</span></span></span> <span class="z-keyword z-operator z-logical z-and z-shell">&&</span> <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-exit z-shell">exit</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0</span>
</span></code></pre><p>The editor also has its own configuration language called kakscript. Although it's better for you to explore what it is since it will be discussed in this post.<p>This editor is highly opinionated and has many mixed opinions among Vimmers. I don't consider myself a Vim expert nor a Kakoune expert but I have experienced using many editors since the start of COVID-19.<h1 id=setup>Setup<a aria-label="Anchor link for: setup" class=zola-anchor href=#setup>ยง</a></h1><p>Some prerequisites needed:<ul><li>Installed <code>cargo</code> from Rust<li>Kakoune itself<li>Julia</ul><p>Assuming you already have the prerequisites, head to <code>$XDG_CONFIG_HOME/kak</code> or <code>~/.config/kak</code>. If the directory does not exist, create it with <code>md</code> or <code>mkdir</code>. Next, at the root of the <code>$XDG_CONFIG_HOME/kak</code> or <code>~/.config/kak</code> let's add a bootstrap install script for <a href=https://github.com/jdugan6240/kak-bundle>kak-bundle</a> in the file <code>kakrc</code>.<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">evaluate-commands</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span><span class="z-variable z-other z-readwrite z-shell">sh</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">  <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> We're assuming the default bundle_path here...</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">  plugins=<span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">kak_config</span></span>/bundle<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">  mkdir -p <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">plugins</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">  <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span> ! <span class="z-keyword z-operator z-word z-shell">-</span>e <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">plugins</span></span>/kak-bundle<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> && <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    git clone -q https://github.com/jdugan6240/kak-bundle <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">plugins</span></span>/kak-bundle<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">  printf <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>%s\n<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>source '<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">plugins</span></span>/kak-bundle/rc/kak-bundle.kak'<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bundle-noload</span></span><span class="z-meta z-function-call z-arguments z-shell"> kak-bundle https://github.com/jdugan6240/kak-bundle</span>
</span></code></pre><p>The script was written in a configuration language called kakoune script or kakscript. The idea behind the language is to utilise the built-in shell that is assumed to be POSIX-compliant or POSIX-compatible e.g. bash, zsh, sh, dash, et cetera.<h2 id=installing-kakoune-lsp>Installing Kakoune LSP<a aria-label="Anchor link for: installing-kakoune-lsp" class=zola-anchor href=#installing-kakoune-lsp>ยง</a></h2><p>Some people including me can't live without LSP so let's include that to our <code>kakrc</code> file.<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bundle</span></span><span class="z-meta z-function-call z-arguments z-shell"> kakoune-lsp <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>git clone --depth 1 -b v17.0.1 https://github.com/kakoune-lsp/kakoune-lsp<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span>  <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    hook global WinSetOption filetype=(julia) <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        set global lsp_hover_anchor false
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        set global lsp_auto_show_code_actions true
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        lsp-enable-window
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        map global user l <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>: enter-user-mode lsp&LTret><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span> -docstring <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>lsp mode commands<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        map global goto w <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>&LTesc>: lsp-hover-buffer lsp-info-window &LTret><span class="z-punctuation z-definition z-string z-end z-shell">'</span></span> -docstring <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>lsp-info-window<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> define-command -docstring 'lsp-logs: shows lsp logs on tmux window' lsp-logs -params 0 %{</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> terminal sh -c 'less +F /tmp/kak-lsp.log'</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> }</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> map global goto L '&LTesc>: lsp-logs &LTret>' -docstring 'show lsp logs on another window'</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    hook global KakEnd .<span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span> <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        lsp-exit
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        nop <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span><span class="z-variable z-other z-readwrite z-shell">sh</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            rm -v /tmp/kak-lsp.log
</span></span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span> <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span></code></pre><p>We also need to add a bootstrap script to install the LanguageServer.jl package with PackageCompiler.jl. At the root of the <code>$XDG_CONFIG_HOME/kak</code> or <code>~/.config/kak</code>, create the directory <code>scripts</code>. Then create the file <code>scripts/julia-ls-install</code> with the following contents<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia"><span class="z-keyword z-other z-julia">import</span> Pkg; Pkg.add<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">PackageCompiler<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>; 
</span><span class="z-source z-julia">Pkg.add<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>url<span class="z-keyword z-operator z-assignment z-julia">=</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">https://github.com/julia-vscode/LanguageServer.jl<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span>, rev<span class="z-keyword z-operator z-assignment z-julia">=</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">master<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>; 
</span><span class="z-source z-julia">Pkg.update<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>;
</span><span class="z-source z-julia"><span class="z-keyword z-other z-julia">using</span> PackageCompiler; create_sysimage<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-keyword z-operator z-colon z-julia"><span class="z-constant z-other z-symbol z-julia">:</span></span><span class="z-constant z-other z-symbol z-julia">LanguageServer</span>, sysimage_path<span class="z-keyword z-operator z-assignment z-julia">=</span>dirname<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>Pkg.Types.Context<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">env</span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">project_file</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span> <span class="z-keyword z-operator z-julia">*</span> <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">/languageserver.so<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span></code></pre><p>And in the <code>$XDG_CONFIG_HOME/kak/kakrc</code> or <code>~/.config/kak/kakrc</code> file, append the following contents<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bundle-install-hook</span></span><span class="z-meta z-function-call z-arguments z-shell"> kakoune-lsp <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    cargo install --path . --root <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">HOME</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>/.local<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">    julia --project=@kak-lsp <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">kak_config</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>/scripts/julia-ls-install
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span></code></pre><p>This will allow you to install kakoune-lsp as well as Julia's LanguageServer.jl and PackageCompiler.jl.<p>The script allows you to run a precompiled sysimage of the Julia LanguageServer.jl (although it's not needed that much ever since precompilation has improved since version 1.9 of Julia).<h2 id=configuring-the-lsp>Configuring the LSP<a aria-label="Anchor link for: configuring-the-lsp" class=zola-anchor href=#configuring-the-lsp>ยง</a></h2><p>kakoune-lsp also needs to have a file that configures the LSP of any language. At the root of the <code>$XDG_CONFIG_HOME/kak-lsp</code> or <code>~/.config/kak-lsp</code>, create the file <code>kak-lsp.toml</code>. If the directory does not exist, create it first before creating the file. Add the following contents to the file<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">snippet_support</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">verbosity</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">2</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">server</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">timeout</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">1800</span> <span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> seconds = 30 minutes</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">language_server</span><span class="z-punctuation z-separator z-table z-toml">.</span><span class="z-entity z-name z-table z-toml">julia</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">filetypes</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>julia<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">roots</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>Project.toml<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>.git<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>.hg<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>Manifest.toml<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">command</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>sh<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">args</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>-c<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">   <span class="z-string z-quoted z-triple z-basic z-block z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"""</span>
</span></span><span class="z-source z-toml"><span class="z-string z-quoted z-triple z-basic z-block z-toml">   julia --startup-file=no --history-file=no --project=@kak-lsp ~/.config/kak/scripts/julia-ls-kak
</span></span><span class="z-source z-toml"><span class="z-string z-quoted z-triple z-basic z-block z-toml">   <span class="z-punctuation z-definition z-string z-end z-toml">"""</span></span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">language_server</span><span class="z-punctuation z-separator z-table z-toml">.</span><span class="z-entity z-name z-table z-toml">julia</span><span class="z-punctuation z-separator z-table z-toml">.</span><span class="z-entity z-name z-table z-toml">settings</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">format</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">indent</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">4</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">lint</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">call</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">lint</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">run</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">missingrefs</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>all<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">lint</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">iter</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">julia</span><span class="z-punctuation z-separator z-key z-toml">.</span><span class="z-entity z-name z-tag z-toml">modname</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">semantic_tokens</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">faces</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>documentation<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>comment<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">modifiers</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>documentation<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>comment<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>comment<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>function<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>function<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>keyword<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>keyword<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>module<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>namespace<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>operator<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>operator<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>string<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>string<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>type<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>type<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>default+d<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>variable<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">modifiers</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>readonly<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>default+d<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>variable<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">modifiers</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>constant<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">    <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">face</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>variable<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">token</span></span><span class="z-punctuation z-definition z-key-value z-toml">=</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>variable<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre><p>Then at the root of the <code>$XDG_CONFIG_HOME/kak</code> or <code>~/.config/kak</code>, add a new file <code>scripts/julia-ls-kak</code> with the following content<pre class="language-julia z-code" data-lang=julia><code class=language-julia data-lang=julia><span class="z-source z-julia"><span class="z-keyword z-other z-julia">import</span> Pkg
</span><span class="z-source z-julia">
</span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia"><span class="z-punctuation z-definition z-comment z-begin z-julia">"""</span>
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">  `buffer_file_path`
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">Gets `buffer-file-name` value which gives
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">the full path to the file associated with the buffer.
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia"><span class="z-punctuation z-definition z-comment z-end z-julia">"""</span></span>
</span><span class="z-source z-julia">buffer_file_path <span class="z-keyword z-operator z-assignment z-julia">=</span> <span class="z-keyword z-control z-julia">if</span> haskey<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">ENV</span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">kak_buffile<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">    <span class="z-constant z-language z-julia">ENV</span><span class="z-meta z-sequence z-julia"><span class="z-punctuation z-section z-sequence z-begin z-julia">[</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">kak_buffile<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-sequence z-end z-julia">]</span></span>
</span><span class="z-source z-julia"><span class="z-keyword z-control z-julia">elseif</span> haskey<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">ENV</span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">KAK_LSP_PROJECT_ROOT_JULIA<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">    <span class="z-constant z-language z-julia">ENV</span><span class="z-meta z-sequence z-julia"><span class="z-punctuation z-section z-sequence z-begin z-julia">[</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">kak_buffile<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-sequence z-end z-julia">]</span></span> <span class="z-keyword z-operator z-assignment z-julia">=</span> <span class="z-constant z-language z-julia">ENV</span><span class="z-meta z-sequence z-julia"><span class="z-punctuation z-section z-sequence z-begin z-julia">[</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">KAK_LSP_PROJECT_ROOT_JULIA<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-sequence z-end z-julia">]</span></span>
</span><span class="z-source z-julia"><span class="z-keyword z-control z-julia">else</span>
</span><span class="z-source z-julia">    <span class="z-constant z-language z-julia">ENV</span><span class="z-meta z-sequence z-julia"><span class="z-punctuation z-section z-sequence z-begin z-julia">[</span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">kak_buffile<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-sequence z-end z-julia">]</span></span> <span class="z-keyword z-operator z-assignment z-julia">=</span> Pkg.Types.Context<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">env</span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">project_file</span>
</span><span class="z-source z-julia"><span class="z-keyword z-other z-julia">end</span>
</span><span class="z-source z-julia">
</span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia"><span class="z-punctuation z-definition z-comment z-begin z-julia">"""</span>
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">  `project_path`
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">Gets the full path of the project where the LSP should
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">start. The steps starts with the following:
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">1. Check if there is an explicitly set project.
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">2. Check for Project.toml from buffer's full file path exluding the file name.
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">3. Check for Project.toml in current working directory.
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia">4. Fallback to global environment.
</span></span><span class="z-source z-julia"><span class="z-comment z-block z-documentation z-julia"><span class="z-punctuation z-definition z-comment z-end z-julia">"""</span></span>
</span><span class="z-source z-julia">project_path <span class="z-keyword z-operator z-assignment z-julia">=</span> <span class="z-keyword z-other z-julia">let</span>
</span><span class="z-source z-julia">    dirname<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>something<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        Base.load_path_expand<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>
</span></span></span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">            p <span class="z-keyword z-operator z-assignment z-julia">=</span> get<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">ENV</span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">JULIA_PROJECT<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span>, <span class="z-constant z-language z-julia">nothing</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>;
</span></span></span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">            p <span class="z-keyword z-operator z-julia">===</span> <span class="z-constant z-language z-julia">nothing</span> <span class="z-keyword z-operator z-julia">?</span> <span class="z-constant z-language z-julia">nothing</span> <span class="z-keyword z-operator z-colon z-julia">:</span> <span class="z-meta z-generic-name z-julia">isempty</span><span class="z-meta z-function-call z-julia"><span class="z-punctuation z-section z-arguments z-begin z-julia">(</span></span><span class="z-meta z-function-call z-julia"><span class="z-meta z-function-call z-arguments z-julia">p<span class="z-punctuation z-section z-arguments z-end z-julia">)</span></span></span> <span class="z-keyword z-operator z-julia">?</span> <span class="z-constant z-language z-julia">nothing</span> <span class="z-keyword z-operator z-colon z-julia">:</span> <span class="z-meta z-generic-name z-julia">p</span>
</span></span></span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        <span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>,
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        Base.current_project<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>strip<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>buffer_file_path<span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>,
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        Base.current_project<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>pwd<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>,
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        Pkg.Types.Context<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">env</span><span class="z-punctuation z-accessor z-dot z-julia">.</span><span class="z-meta z-generic-name z-julia">project_file</span>,
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">        Base.active_project<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span></span></span><span class="z-source z-julia"><span class="z-meta z-group z-julia"><span class="z-meta z-group z-julia">    <span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia"><span class="z-keyword z-other z-julia">end</span>
</span><span class="z-source z-julia">
</span><span class="z-source z-julia"><span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span> Activate the project</span>
</span><span class="z-source z-julia">Pkg.activate<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>project_path<span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia"><span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span> Install packages if they weren't installed</span>
</span><span class="z-source z-julia">Pkg.instantiate<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>; verbose<span class="z-keyword z-operator z-assignment z-julia">=</span><span class="z-constant z-language z-julia">true</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia"><span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span> Then remove it from the LOAD_PATH</span>
</span><span class="z-source z-julia"><span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span> We did this just to get the packages for the</span>
</span><span class="z-source z-julia"><span class="z-comment z-line z-number-sign z-julia"><span class="z-punctuation z-definition z-comment z-julia">#</span> project, we do not need it for the LSP.</span>
</span><span class="z-source z-julia">popfirst<span class="z-keyword z-operator z-julia">!</span><span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">LOAD_PATH</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">
</span><span class="z-source z-julia">ls_install_path <span class="z-keyword z-operator z-assignment z-julia">=</span> joinpath<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>get<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>DEPOT_PATH, <span class="z-constant z-numeric z-julia">1</span>, joinpath<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>homedir<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">.julia<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">environments<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">kak-lsp<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>;
</span><span class="z-source z-julia">pushfirst<span class="z-keyword z-operator z-julia">!</span><span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">LOAD_PATH</span>, ls_install_path<span class="z-punctuation z-section z-group z-end z-julia">)</span></span>;
</span><span class="z-source z-julia"><span class="z-keyword z-other z-julia">using</span> LanguageServer;
</span><span class="z-source z-julia">popfirst<span class="z-keyword z-operator z-julia">!</span><span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">LOAD_PATH</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>;
</span><span class="z-source z-julia">depot_path <span class="z-keyword z-operator z-assignment z-julia">=</span> get<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-constant z-language z-julia">ENV</span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">JULIA_DEPOT_PATH<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">symbol_server_path <span class="z-keyword z-operator z-assignment z-julia">=</span> joinpath<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>homedir<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">.cache<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span>, <span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia"><span class="z-punctuation z-definition z-string z-begin z-julia">"</span></span></span><span class="z-meta z-string z-julia"><span class="z-string z-quoted z-double z-julia">julia_lsp_symbol_server<span class="z-punctuation z-definition z-string z-end z-julia">"</span></span></span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">mkpath<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>symbol_server_path<span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">server <span class="z-keyword z-operator z-assignment z-julia">=</span> LanguageServer.LanguageServerInstance<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>stdin, stdout, project_path, depot_path, <span class="z-constant z-language z-julia">nothing</span>, symbol_server_path, <span class="z-constant z-language z-julia">true</span><span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span><span class="z-source z-julia">server.runlinter <span class="z-keyword z-operator z-assignment z-julia">=</span> <span class="z-constant z-language z-julia">true</span>
</span><span class="z-source z-julia">run<span class="z-meta z-group z-julia"><span class="z-punctuation z-section z-group z-begin z-julia">(</span>server<span class="z-punctuation z-section z-group z-end z-julia">)</span></span>
</span></code></pre><p>This is a custom LSP script I made to avoid the limitations of just running <code>run(server)</code>. See the comments above the <code>project_path</code> variable.<h1 id=conclusion>Conclusion<a aria-label="Anchor link for: conclusion" class=zola-anchor href=#conclusion>ยง</a></h1><p>That's it. You have finally reached the end of the post and have configured your kakoune editor to work with Julia.<p>Here are what the result should look like if (ignoring the statusline and the gruvbox theme) if you have the config:<p>Hover: <img alt="LSP Hover" src=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/./Screenshot-0608211900.webp><p>Snippets and Completions: <img alt=Completions src=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/./Screenshot-0608211948.webp><h1 id=versions-of-software-used-at-the-time-of-writing>Versions of software used at the time of writing<a aria-label="Anchor link for: versions-of-software-used-at-the-time-of-writing" class=zola-anchor href=#versions-of-software-used-at-the-time-of-writing>ยง</a></h1><ul><li>Julia v1.10.4<li>Rust 1.78<li>Kakoune v2023.08.05<li>Kakoune LSP v17.0.1</ul></section></article></div><section class=webring><h3>Articles from blogs I follow around the net</h3><section class=articles><div class=article><h4 class=title dir=auto><a href=https://www.integralist.co.uk/posts/go-concurrency-patterns/ rel=noopener target=_blank>Go Concurrency Patterns</a></h4><p class=summary dir=auto>Goroutines Channels Select Statement Wait Groups Mutex Conditions Atomic Operations Once Context Map Real Examples Goroutines The go keyword is used to start a goroutine. A goroutine is a lightweight, managed thread used by the Go runtime to run functions โฆ</p><small class=source> via <a href=https://www.integralist.co.uk/posts/>Posts on integralist</a></small><small class=date>November 15, 2024</small></div><div class=article><h4 class=title dir=auto><a href=https://maia.crimew.gay/posts/anarchism-in-the-now/ rel=noopener target=_blank>anarchism starts in the now: hope for a better future</a></h4><p class=summary dir=auto>there is still time</p><small class=source> via <a href=https://maia.crimew.gay/>maia blog</a></small><small class=date>November 14, 2024</small></div><div class=article><h4 class=title dir=auto><a href=https://ludic.mataroa.blog/blog/why-i-will-always-be-angry-about-software-engineering/ rel=noopener target=_blank>Why I Will Always Be Angry About Software Engineering</a></h4><p class=summary dir=auto>Why do I bother getting angry about software? When I started writing, it came from a place of ennui โ absolute despair at the amount of waste I was seeing in the technology sector since leaving university. I was paid spectacularly well, but nothing I produโฆ</p><small class=source> via <a href=https://ludic.mataroa.blog/>Ludicity</a></small><small class=date>November 12, 2024</small></div><div class=article><h4 class=title dir=auto><a href=https://www.gingerbill.org/article/2024/11/10/opengl-is-not-right-handed/ rel=noopener target=_blank>OpenGL is not Right-Handed</a></h4><p class=summary dir=auto>The original Twitter thread: https://x.com/TheGingerBill/status/1508833104567414785 I have a huge gripe when I read articles/tutorials on OpenGL: most people have no idea what they are talking about when it comes to coordinate systems and matrices. Specifiโฆ</p><small class=source> via <a href=https://www.gingerbill.org/article/>Articles on gingerBill</a></small><small class=date>November 10, 2024</small></div><div class=article><h4 class=title dir=auto><a href=https://macwright.com/2024/11/03/recently.html rel=noopener target=_blank>Recently: Cycling and Autumn</a></h4><p class=summary dir=auto>I havenโt been posting much to the โmain blogโ recently, but I have been keeping the micro blog updates humming. If you want more content in your RSS reader, you can subscribe to those posts, which are shorter, more scattered, and even less copyedited. It โฆ</p><small class=source> via <a href=https://macwright.com/>macwright.com</a></small><small class=date>November 03, 2024</small></div><div class=article><h4 class=title dir=auto><a href=https://www.labs.greynoise.io/grimoire/2024-10-31-sift-0-day-rce/ rel=noopener target=_blank>CVE-2024-8956, CVE-2024-8957: How to Steal a 0-Day RCE (With a Little Help from an LLM)</a></h4><p class=summary dir=auto>Introduction The GreyNoise Labs team discovered the vulnerabilities below after pivoting off the payload flagged by Sift, an LLM-powered threat hunting tool we use to make Finding Signals in the (Grey) Noise and writing tags more efficient. If youโre interโฆ</p><small class=source> via <a href=https://www.labs.greynoise.io/grimoire/>GreyNoise Labs</a></small><small class=date>October 31, 2024</small></div></section><p class=attribution>Generated by <a href=https://github.com/lukehsiao/openring-rs>openring-rs</a></section><footer>follow <a href=https://fosstodon.org/@uncomfyhalomacro rel=me target=_blank>uncomfyhalomacro@fosstodon.org</a> โ ยฉ 2024 <a href=https://codeberg.org/uncomfyhalomacro/gruvbox-v target=_blank>gruvbox-v</a> โ powered by <a href=https://getzola.org target=_blank>zola</a> โ theme by <a href=https://codeberg.org/uncomfyhalomacro target=_blank>uncomfyhalomacro</a> โ Content <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank>CC-BY-4.0</a></footer></div><div class=right-grid><div class=toc><h1>Contents</h1><div class=toc-container><ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#what-is-kakoune>What is Kakoune?</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#setup>Setup</a> <ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#installing-kakoune-lsp>Installing Kakoune LSP</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#configuring-the-lsp>Configuring the LSP</a></ul><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#conclusion>Conclusion</a><li><a href=https://uncomfyhalomacro.pl/blog/how-to-setup-julia-with-kakoune/#versions-of-software-used-at-the-time-of-writing>Versions of software used at the time of writing</a></ul></div></div></div></div><div class=topnav><a class=icon href=javascript:void(0); onclick=resize()> <img alt="favicon here" class=icon_img src=/favicon.png> </a><a class=active href=https://uncomfyhalomacro.pl/>home</a><a href=https://uncomfyhalomacro.pl/tags>tags</a><a href=https://uncomfyhalomacro.pl/blog/>blog</a><a href=/microbio-cv.pdf>microbio cv</a><a href=/tech-cv.pdf>tech cv</a><div id=myLinks><a href=https://uncomfyhalomacro.pl/scripts/>scripts</a><a href=https://uncomfyhalomacro.pl/lecture/>lecture</a></div></div></div>